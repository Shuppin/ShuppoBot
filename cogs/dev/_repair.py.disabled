import nextcord as discord
from nextcord.ext import commands

import os
import sys

prod = False # In produciton state?

class _repair(commands.Cog):
  
  def __init__(self, bot):
    self.bot = bot
  
  @commands.Cog.listener()
  async def on_ready(self):
    print("Module '_repair' initialised")

  @commands.command()
  @commands.is_owner()
  async def restart(self, ctx):

    if prod == False:
      await ctx.send("Are you sure?")

      def check(m):
        return m.content[0].lower() in ["y", "n"] and len(m.content) < 4 and m.channel == ctx.channel

      msg = await self.bot.wait_for("message", check=check)

      if msg.content == 'y':
        await ctx.send("Restarting bot...")
        os.execl(sys.executable, sys.executable, *sys.argv)

      elif msg.content == 'n':
        await ctx.send("Then why did you type the command bruhh")

    else:
      os.execl(sys.executable, sys.executable, *sys.argv)